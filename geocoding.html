<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Curso: Geoanálisis - 6&nbsp; Geocoding</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./r_project.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<link href="site_libs/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="site_libs/HomeButton-0.0.1/home-button.js"></script>
<script src="site_libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="site_libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="site_libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="site_libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">


<link rel="stylesheet" href="styles/style.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./r_project.html">Anexos</a></li><li class="breadcrumb-item"><a href="./geocoding.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Geocoding</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Curso: Geoanálisis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Antecedentes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_estad_esp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Estadística Espacial</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datos_espaciales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Datos Espaciales</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datos_vectoriales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Datos Vectoriales</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./raster.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Datos tipo Raster</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Anexos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">R Project</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./geocoding.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Geocoding</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">6.1</span> Introducción</a></li>
  <li><a href="#consolidación-de-bases" id="toc-consolidación-de-bases" class="nav-link" data-scroll-target="#consolidación-de-bases"><span class="header-section-number">6.2</span> Consolidación de Bases</a></li>
  <li><a href="#etapa-1-limpieza-inicial" id="toc-etapa-1-limpieza-inicial" class="nav-link" data-scroll-target="#etapa-1-limpieza-inicial"><span class="header-section-number">6.3</span> Etapa 1: Limpieza Inicial</a></li>
  <li><a href="#etapa-2-limpieza-específica" id="toc-etapa-2-limpieza-específica" class="nav-link" data-scroll-target="#etapa-2-limpieza-específica"><span class="header-section-number">6.4</span> Etapa 2: Limpieza Específica</a></li>
  <li><a href="#etapa-3-distancia-jaro-winkler" id="toc-etapa-3-distancia-jaro-winkler" class="nav-link" data-scroll-target="#etapa-3-distancia-jaro-winkler"><span class="header-section-number">6.5</span> Etapa 3: Distancia Jaro-Winkler</a></li>
  <li><a href="#consolidación-y-transformación-espacial" id="toc-consolidación-y-transformación-espacial" class="nav-link" data-scroll-target="#consolidación-y-transformación-espacial"><span class="header-section-number">6.6</span> Consolidación y Transformación espacial</a></li>
  <li><a href="#conclusión" id="toc-conclusión" class="nav-link" data-scroll-target="#conclusión"><span class="header-section-number">6.7</span> Conclusión</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./r_project.html">Anexos</a></li><li class="breadcrumb-item"><a href="./geocoding.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Geocoding</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Geocoding</span></h1>
<p class="subtitle lead">Direcciones a Coordenadas</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introducción" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="introducción"><span class="header-section-number">6.1</span> Introducción</h2>
<p>La geocodificación es el proceso de convertir direcciones físicas (por ejemplo, “Presidente Errázuriz 3485, Las Condes”) en coordenadas geográficas (latitud y longitud), que se pueden utilizar para posicionar elementos o eventos en el espacio de un mapa o para análisis espaciales. Este proceso es fundamental en diversos proyectos de análisis espacial, ya que permite transformar datos textuales en información espacial.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/geocoding.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="500"></p>
</figure>
</div>
<p>Para realizar el proceso de geocodificación de direcciones es necesario contar con un <strong>motor de geocodificación</strong> que es un servicio o sistema que convierte direcciones físicas en coordenadas geográficas (latitud y longitud), o viceversa, un proceso conocido como “reverse geocoding”. Estos motores son esenciales para analizar datos espaciales cuando la información disponible está en formato de texto (como direcciones postales). Los motores de geocodificación utilizan bases de datos geográficas y algoritmos de correspondencia para ubicar puntos específicos en un mapa a partir de descripciones textuales. Dependiendo del motor, pueden ofrecer características adicionales, como filtrado por región, cálculos de rutas, o integración con sistemas de tráfico en tiempo real. La siguiente tabla compara varios motores de geocodificación en cuanto a características, cobertura, precisión y si son gratuitos o de pago.</p>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th>Motor</th>
<th>Tipo</th>
<th>Cobertura</th>
<th>Precisión</th>
<th>Límite Gratuito</th>
<th>Características Adicionales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Google Geocoding API</td>
<td>De pago</td>
<td>Mundial</td>
<td>Alta</td>
<td>40,000 diarias</td>
<td>Geocodificación y “reverse geocoding”, alta calidad.</td>
</tr>
<tr class="even">
<td>OpenStreetMap Nominatim</td>
<td>Gratuito</td>
<td>Mundial</td>
<td>Buena</td>
<td>Límite bajo</td>
<td>Basado en OpenStreetMap, infraestructura propia recomendada.</td>
</tr>
<tr class="odd">
<td>HERE Geocoder API</td>
<td>De pago</td>
<td>Mundial</td>
<td>Alta</td>
<td>250,000 mensuales</td>
<td>Filtrado avanzado, datos de tráfico en tiempo real.</td>
</tr>
<tr class="even">
<td>Mapbox Geocoding API</td>
<td>De pago</td>
<td>Mundial</td>
<td>Alta</td>
<td>100,000 mensuales</td>
<td>Integración con Mapbox, geocodificación en tiempo real.</td>
</tr>
<tr class="odd">
<td>Bing Maps Geocoding API</td>
<td>De pago</td>
<td>Mundial</td>
<td>Alta</td>
<td>125,000 mensuales</td>
<td>Información adicional sobre tipo de localización.</td>
</tr>
<tr class="even">
<td>Geocode.xyz</td>
<td>Gratuito</td>
<td>Mundial</td>
<td>Moderada</td>
<td>1,000 diarias</td>
<td>Servicio gratuito con opciones de pago.</td>
</tr>
<tr class="odd">
<td>TomTom Geocoding API</td>
<td>De pago</td>
<td>Mundial</td>
<td>Alta</td>
<td>2,500 diarias</td>
<td>Uso en navegación y tráfico en tiempo real.</td>
</tr>
</tbody>
</table>
<p><strong>Etapas</strong> En los procesos de geocodificación de direcciones, las etapas de transformación pueden ser numerosas y variadas, dependiendo del tipo de direcciones y los errores que puedan contener. Cada dirección puede presentar desafíos únicos, como errores tipográficos, variaciones en la nomenclatura o información incompleta, lo que hace que estos procesos sean, en cierto modo, artesanales, ya que requieren ajustes específicos para mejorar la precisión de los resultados. En este capítulo nos enfocaremos en tres etapas fundamentales, pero es importante destacar que el número de etapas puede ampliarse dependiendo de la complejidad de las direcciones:</p>
<p><strong>Etapa 0</strong>: Consolidación de Bases, Integración de las diferentes fuentes de datos para generar una base unificada de direcciones.</p>
<p><strong>Etapa 1</strong>: Limpieza Inicial: Normalización básica de las direcciones, como eliminar tildes y convertir todo a mayúsculas.</p>
<p><strong>Etapa 2</strong>: Limpieza Específica: Ajustes más detallados, dependiendo de la estructura de las direcciones, para corregir errores comunes.</p>
<p><strong>Etapa 3</strong>: Distancia Jaro-Winkler: Comparación y corrección de nombres de calles utilizando la métrica de similitud Jaro-Winkler.</p>
<p>Aunque nos enfocamos en estas tres etapas, los procesos de geocodificación pueden incluir muchas más fases según las características de los datos y la precisión deseada.</p>
<p>Este documento presenta un enfoque paso a paso del proceso de geocodificación utilizando R. Exploraremos cómo convertir direcciones en coordenadas y cómo calcular distancias entre puntos geográficos utilizando varias librerías de R, como <code>tidygeocoder</code>, <code>sf</code>, y <code>dplyr</code>.</p>
</section>
<section id="consolidación-de-bases" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="consolidación-de-bases"><span class="header-section-number">6.2</span> Consolidación de Bases</h2>
<p><strong>Objetivos:</strong></p>
<ul>
<li>Conocer la base de datos, en estructura y contenidos, para analizarla a fin de estimar niveles de complejidad en su posterior procesamiento.</li>
<li>Consolidar las bases de datos en una sola con solamente la información necesaria para la georeferenciación, donde cada registro tiene una variable denominada ID que permite identificar su fuente y correlativo.</li>
</ul>
<p>Librerías</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># librerías</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringdist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Leer las Bases:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># direcciones &lt;- readRDS("data/direcciones/dirs_60.rds")</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># direcciones$NUMERO &lt;- as.numeric(direcciones$NUMERO) + 5</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(direcciones, "data/direcciones/dirs_60.rds")</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>direcciones <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/direcciones/dirs_60.rds"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(direcciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEDE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CALLE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NUMERO</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">COMUNA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REGION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MT_090992</td>
<td style="text-align: left;">CAMPUS ARAUCO</td>
<td style="text-align: left;">PSJE ZARATE</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">ARAUCO</td>
<td style="text-align: left;">VIII - BIO-BIO</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_069161</td>
<td style="text-align: left;">PLAZA VESPUCIO</td>
<td style="text-align: left;">BOLIVAR</td>
<td style="text-align: right;">5903</td>
<td style="text-align: left;">PEÑALOLÉN</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_079411</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: left;">SANTA SARA</td>
<td style="text-align: right;">1727</td>
<td style="text-align: left;">VILLA ALEMANA</td>
<td style="text-align: left;">V - VALPARAISO</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_029721</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">CASA GRANDE</td>
<td style="text-align: right;">8856</td>
<td style="text-align: left;">LO ESPEJO</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_008657</td>
<td style="text-align: left;">PUENTE ALTO</td>
<td style="text-align: left;">MARCELA PAZ</td>
<td style="text-align: right;">3512</td>
<td style="text-align: left;">LA FLORIDA</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS_006472</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">PSJE ARGEL</td>
<td style="text-align: right;">1625</td>
<td style="text-align: left;">CONCHALÍ</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_072766</td>
<td style="text-align: left;">SAN BERNARDO</td>
<td style="text-align: left;">Volcan Antuco</td>
<td style="text-align: right;">14488</td>
<td style="text-align: left;">S/ BERNARDO</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_021510</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">SAN AGUSTIN ORIENTE</td>
<td style="text-align: right;">4362</td>
<td style="text-align: left;">LAMPA</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_076946</td>
<td style="text-align: left;">SAN JOAQUIN</td>
<td style="text-align: left;">EMILIO TAGLE</td>
<td style="text-align: right;">10284</td>
<td style="text-align: left;">LA FLORIDA</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_047169</td>
<td style="text-align: left;">VALPARAISO</td>
<td style="text-align: left;">CALI</td>
<td style="text-align: right;">791</td>
<td style="text-align: left;">LA CALERA</td>
<td style="text-align: left;">V - VALPARAISO</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Tomaremos como ejemplo 60 direcciones para hacer el proceso de geocodificación, donde ya tenemos filtradas las columnas de interés como también un ID único para cada registro.</p>
</section>
<section id="etapa-1-limpieza-inicial" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="etapa-1-limpieza-inicial"><span class="header-section-number">6.3</span> Etapa 1: Limpieza Inicial</h2>
<p>Para el proceso de limpieza inicial, se puede escribir cualquier función que se considere adecuada según la naturaleza de las direcciones, teniendo siempre en cuenta el <strong>motor de geocodificación</strong> que se utilizará. Estos motores son sensibles al formato del texto, por lo que es crucial que las direcciones estén bien formateadas para mejorar la precisión del proceso de geocodificación. A continuación, presentamos un ejemplo de función. La función limpieza() es útil cuando necesitamos estandarizar cadenas de texto eliminando tildes, convirtiendo todo a mayúsculas y limpiando ciertos caracteres no deseados. Su funcionamiento es el siguiente:</p>
<ol type="1">
<li>Conversión a mayúsculas: Utiliza la función stringr::str_to_upper para convertir todas las letras en mayúsculas.</li>
<li>Eliminación de tildes: Mediante chartr, las vocales con tilde (ÁÉÍÓÚ) son reemplazadas por sus equivalentes sin tilde (AEIOU), normalizando las vocales.</li>
<li>Eliminación de puntuación: Se eliminan todos los signos de puntuación excepto el apóstrofe (esto es útil para nombres como “O’Higgins”).</li>
<li>Limpieza de caracteres no deseados: Elimina símbolos específicos, como el carácter º.</li>
<li>Espacios: Usa str_squish para eliminar espacios innecesarios, como los que se encuentran al inicio o los que están repetidos entre palabras.</li>
</ol>
<p>Esta función es muy útil para preparar texto en análisis de datos o cuando queremos asegurarnos de que las entradas de texto sean uniformes y fáciles de comparar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para dejar todo en mayúscula y sin tildes</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>limpieza <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># x &lt;- stri_trans_general(x,"latin-ASCII") # eliminar tildes</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_upper</span>(x) <span class="co"># mayúsculas</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">chartr</span>(<span class="st">"ÁÉÍÓÚ"</span>, <span class="st">"AEIOU"</span>, x)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"(?!')[[:punct:]]"</span>, <span class="st">""</span>, x, <span class="at">perl=</span><span class="cn">TRUE</span>) <span class="co">#Excepción apostrofe de o'higgins</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">'º'</span>, <span class="st">""</span>, x)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_squish</span>(x) <span class="co"># eliminar espacios al comienzo y espacios repetidos</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  x</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Aplicación de la función de limpieza</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>direcciones <span class="ot">&lt;-</span> direcciones <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">CALLE =</span> <span class="fu">limpieza</span>(CALLE))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEDE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CALLE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NUMERO</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">COMUNA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REGION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MT_090992</td>
<td style="text-align: left;">CAMPUS ARAUCO</td>
<td style="text-align: left;">PSJE ZARATE</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">ARAUCO</td>
<td style="text-align: left;">VIII - BIO-BIO</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_069161</td>
<td style="text-align: left;">PLAZA VESPUCIO</td>
<td style="text-align: left;">BOLIVAR</td>
<td style="text-align: right;">5903</td>
<td style="text-align: left;">PEÑALOLÉN</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_079411</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: left;">SANTA SARA</td>
<td style="text-align: right;">1727</td>
<td style="text-align: left;">VILLA ALEMANA</td>
<td style="text-align: left;">V - VALPARAISO</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_029721</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">CASA GRANDE</td>
<td style="text-align: right;">8856</td>
<td style="text-align: left;">LO ESPEJO</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_008657</td>
<td style="text-align: left;">PUENTE ALTO</td>
<td style="text-align: left;">MARCELA PAZ</td>
<td style="text-align: right;">3512</td>
<td style="text-align: left;">LA FLORIDA</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS_006472</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">PSJE ARGEL</td>
<td style="text-align: right;">1625</td>
<td style="text-align: left;">CONCHALÍ</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p><strong>Generar columna de Consulta</strong>:</p>
<p>El siguiente código crea dos nuevas columnas en el marco de datos direcciones. La columna <code>CONSULTA</code> concatena el número, la calle, la comuna y la región en un solo campo. Esto es necesario para la geocodificación, ya que los motores de geocodificación requieren una dirección completa en un formato estándar para poder convertirla en coordenadas geográficas. (Ejemplo ver parámetros de <a href="https://nominatim.org/release-docs/latest/api/Search/">búsqueda en nominatim</a>)</p>
<p>Además, se crea la columna <code>ETAPA</code>, que registra el valor 1 para indicar que la dirección se encuentra en la primera etapa del proceso de geocodificación. Esta columna es útil para rastrear el progreso de la geocodificación en varias etapas, permitiendo un seguimiento más detallado de cada paso del proceso.</p>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEDE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CALLE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NUMERO</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">COMUNA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REGION</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CONSULTA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ETAPA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MT_090992</td>
<td style="text-align: left;">CAMPUS ARAUCO</td>
<td style="text-align: left;">PSJE ZARATE</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">ARAUCO</td>
<td style="text-align: left;">VIII - BIO-BIO</td>
<td style="text-align: left;">29 PSJE ZARATE, ARAUCO, VIII - BIO-BIO</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_069161</td>
<td style="text-align: left;">PLAZA VESPUCIO</td>
<td style="text-align: left;">BOLIVAR</td>
<td style="text-align: right;">5903</td>
<td style="text-align: left;">PEÑALOLÉN</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">5903 BOLIVAR, PEÑALOLÉN, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_079411</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: left;">SANTA SARA</td>
<td style="text-align: right;">1727</td>
<td style="text-align: left;">VILLA ALEMANA</td>
<td style="text-align: left;">V - VALPARAISO</td>
<td style="text-align: left;">1727 SANTA SARA, VILLA ALEMANA, V - VALPARAISO</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_029721</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">CASA GRANDE</td>
<td style="text-align: right;">8856</td>
<td style="text-align: left;">LO ESPEJO</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">8856 CASA GRANDE, LO ESPEJO, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_008657</td>
<td style="text-align: left;">PUENTE ALTO</td>
<td style="text-align: left;">MARCELA PAZ</td>
<td style="text-align: right;">3512</td>
<td style="text-align: left;">LA FLORIDA</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">3512 MARCELA PAZ, LA FLORIDA, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS_006472</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">PSJE ARGEL</td>
<td style="text-align: right;">1625</td>
<td style="text-align: left;">CONCHALÍ</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">1625 PSJE ARGEL, CONCHALÍ, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p><strong>Geocodificación</strong></p>
<p>Se utilizará una librería llamada <a href="https://jessecambon.github.io/tidygeocoder/">tidygeocoder</a> que da acceso a los servicios de geocodificación en este caso Nominatim online. El procedimiento que se realizó en el proyecto difiere ya que se utilizó el motor de geocodificación local que ofrece mayor performance.</p>
<p>Aquí utilizamos la función <code>geocode</code> para convertir una dirección textual en coordenadas geográficas (latitud y longitud) utilizando el servicio de OpenStreetMap (OSM). Este es un paso esencial para cualquier análisis espacial que involucre ubicaciones basadas en direcciones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># geocode the addresses</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>geocoding <span class="ot">&lt;-</span> direcciones <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geocode</span>(CONSULTA, <span class="at">method =</span> <span class="st">'osm'</span>, <span class="at">lat =</span> latitude , <span class="at">long =</span> longitude)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEDE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CALLE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NUMERO</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">COMUNA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REGION</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CONSULTA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ETAPA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">latitude</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">longitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MT_090992</td>
<td style="text-align: left;">CAMPUS ARAUCO</td>
<td style="text-align: left;">PSJE ZARATE</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">ARAUCO</td>
<td style="text-align: left;">VIII - BIO-BIO</td>
<td style="text-align: left;">29 PSJE ZARATE, ARAUCO, VIII - BIO-BIO</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_069161</td>
<td style="text-align: left;">PLAZA VESPUCIO</td>
<td style="text-align: left;">BOLIVAR</td>
<td style="text-align: right;">5903</td>
<td style="text-align: left;">PEÑALOLÉN</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">5903 BOLIVAR, PEÑALOLÉN, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-33.48036</td>
<td style="text-align: right;">-70.57028</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_079411</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: left;">SANTA SARA</td>
<td style="text-align: right;">1727</td>
<td style="text-align: left;">VILLA ALEMANA</td>
<td style="text-align: left;">V - VALPARAISO</td>
<td style="text-align: left;">1727 SANTA SARA, VILLA ALEMANA, V - VALPARAISO</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-33.06368</td>
<td style="text-align: right;">-71.37489</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_029721</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">CASA GRANDE</td>
<td style="text-align: right;">8856</td>
<td style="text-align: left;">LO ESPEJO</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">8856 CASA GRANDE, LO ESPEJO, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_008657</td>
<td style="text-align: left;">PUENTE ALTO</td>
<td style="text-align: left;">MARCELA PAZ</td>
<td style="text-align: right;">3512</td>
<td style="text-align: left;">LA FLORIDA</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">3512 MARCELA PAZ, LA FLORIDA, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-33.52732</td>
<td style="text-align: right;">-70.55762</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS_006472</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">PSJE ARGEL</td>
<td style="text-align: right;">1625</td>
<td style="text-align: left;">CONCHALÍ</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">1625 PSJE ARGEL, CONCHALÍ, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Resultados de etapa 1</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">resultados</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">codificadas</td>
<td style="text-align: left;">35</td>
</tr>
<tr class="even">
<td style="text-align: left;">no_codificadas</td>
<td style="text-align: left;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p_codificadas</td>
<td style="text-align: left;">58.3333333333333%</td>
</tr>
<tr class="even">
<td style="text-align: left;">p_no_codificadas</td>
<td style="text-align: left;">41.6666666666667%</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</section>
<section id="etapa-2-limpieza-específica" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="etapa-2-limpieza-específica"><span class="header-section-number">6.4</span> Etapa 2: Limpieza Específica</h2>
<p><strong>Lectura de no geocodificados</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>geocoding2 <span class="ot">&lt;-</span>  geocoding <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(latitude))  <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>latitude, <span class="sc">-</span>longitude)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(geocoding2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEDE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CALLE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NUMERO</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">COMUNA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REGION</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CONSULTA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ETAPA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MT_090992</td>
<td style="text-align: left;">CAMPUS ARAUCO</td>
<td style="text-align: left;">PSJE ZARATE</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">ARAUCO</td>
<td style="text-align: left;">VIII - BIO-BIO</td>
<td style="text-align: left;">29 PSJE ZARATE, ARAUCO, VIII - BIO-BIO</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_029721</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">CASA GRANDE</td>
<td style="text-align: right;">8856</td>
<td style="text-align: left;">LO ESPEJO</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">8856 CASA GRANDE, LO ESPEJO, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_006472</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">PSJE ARGEL</td>
<td style="text-align: right;">1625</td>
<td style="text-align: left;">CONCHALÍ</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">1625 PSJE ARGEL, CONCHALÍ, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_021510</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">SAN AGUSTIN ORIENTE</td>
<td style="text-align: right;">4362</td>
<td style="text-align: left;">LAMPA</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">4362 SAN AGUSTIN ORIENTE, LAMPA, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_055164</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">LAS VERTIENTES VILUCO</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">BUIN</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">20 LAS VERTIENTES VILUCO, BUIN, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS_007211</td>
<td style="text-align: left;">PLAZA OESTE</td>
<td style="text-align: left;">VILLA LOS PRESIDENTES PASAJE M</td>
<td style="text-align: right;">133</td>
<td style="text-align: left;">TALAGANTE</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">133 VILLA LOS PRESIDENTES PASAJE M, TALAGANTE, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SP_001181</td>
<td style="text-align: left;">MAIPU</td>
<td style="text-align: left;">AVENIDA EL CONQUISTADOR</td>
<td style="text-align: right;">1336</td>
<td style="text-align: left;">MAIPU</td>
<td style="text-align: left;">RM - METROPOLITANA</td>
<td style="text-align: left;">1336 AVENIDA EL CONQUISTADOR, MAIPU, RM - METROPOLITANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_071172</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: left;">CALLE LIMACHE</td>
<td style="text-align: right;">5050</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: left;">V - VALPARAISO</td>
<td style="text-align: left;">5050 CALLE LIMACHE, VIÑA DEL MAR, V - VALPARAISO</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_015664</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: left;">LUIS EMILIO RECABARREN BLOCK 23 DEPTO 21 PLAYA ANCHA</td>
<td style="text-align: right;">598</td>
<td style="text-align: left;">VALPARAISO</td>
<td style="text-align: left;">V - VALPARAISO</td>
<td style="text-align: left;">598 LUIS EMILIO RECABARREN BLOCK 23 DEPTO 21 PLAYA ANCHA, VALPARAISO, V - VALPARAISO</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_056474</td>
<td style="text-align: left;">VALPARAISO</td>
<td style="text-align: left;">JULIAN FIERRO 160 CBARON</td>
<td style="text-align: right;">165</td>
<td style="text-align: left;">VALPARAÍSO</td>
<td style="text-align: left;">V - VALPARAISO</td>
<td style="text-align: left;">165 JULIAN FIERRO 160 CBARON, VALPARAÍSO, V - VALPARAISO</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p><strong>Limpieza por expresiones regulares o Patrones</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>geocoding2 <span class="ot">&lt;-</span> geocoding2 <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_CALLE =</span> CALLE) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_CALLE =</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"AV "</span>,<span class="at">replacement =</span> <span class="st">"AVENIDA "</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span>  NOM_CALLE)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_CALLE =</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"PSJE "</span>,<span class="at">replacement =</span> <span class="st">"PASAJE "</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span>  NOM_CALLE)) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_CALLE =</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"PASAJE "</span>,<span class="at">replacement =</span> <span class="st">" "</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span>  NOM_CALLE)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_CALLE =</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"S/N "</span>,<span class="at">replacement =</span> <span class="st">" "</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">x =</span>  NOM_CALLE)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_CALLE =</span> stringr<span class="sc">::</span><span class="fu">str_squish</span>(NOM_CALLE))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Limpieza de Nombre de Región</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encuentra y reemplaza</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>find_replace <span class="ot">&lt;-</span>  <span class="cf">function</span>(patron, reemplazo, data_vector){</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  ids <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="at">pattern =</span> patron, data_vector)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  data_vector[ids] <span class="ot">&lt;-</span> reemplazo</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(data_vector)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>geocoding2 <span class="ot">&lt;-</span> geocoding2 <span class="sc">%&gt;%</span> </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_REGION =</span> REGION) <span class="sc">%&gt;%</span> </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_REGION =</span> <span class="fu">find_replace</span>(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">patron =</span> <span class="st">"ÑUBLE"</span>, <span class="at">reemplazo =</span> <span class="st">"Región de Ñuble"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">data_vector =</span>  NOM_REGION)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_REGION =</span> <span class="fu">find_replace</span>(</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">patron =</span> <span class="st">"METROPOLITANA"</span>, </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">reemplazo =</span> <span class="st">"Región Metropolitana de Santiago"</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">data_vector =</span>  NOM_REGION)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_REGION =</span> <span class="fu">find_replace</span>(</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">patron =</span> <span class="st">"BIO"</span>, <span class="at">reemplazo =</span> <span class="st">"Región del Biobío"</span>,</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">data_vector =</span>  NOM_REGION)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_REGION =</span> <span class="fu">find_replace</span>(</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">patron =</span> <span class="st">"MAULE"</span>, <span class="at">reemplazo =</span> <span class="st">"Región del Maule"</span>,</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">data_vector =</span>  NOM_REGION)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NOM_REGION =</span> <span class="fu">find_replace</span>(</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">patron =</span> <span class="st">"V - VALPARAISO"</span>, <span class="at">reemplazo =</span> <span class="st">"Región de Valparaíso"</span>,</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">data_vector =</span>  NOM_REGION))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Geocodificación</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>geocoding2 <span class="ot">&lt;-</span>  geocoding2  <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CONSULTA =</span> <span class="fu">paste0</span>(NUMERO, <span class="st">" "</span>, NOM_CALLE, <span class="st">", "</span>, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                           COMUNA, <span class="st">", "</span>, NOM_REGION)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ETAPA =</span> <span class="dv">2</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># gecodificación</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>res_geocoding2 <span class="ot">&lt;-</span> geocoding2 <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geocode</span>(CONSULTA,  <span class="at">method =</span> <span class="st">'osm'</span>, </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">lat =</span> latitude , <span class="at">long =</span> longitude)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEDE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CALLE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">NUMERO</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">COMUNA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CONSULTA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ETAPA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">NOM_CALLE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">NOM_REGION</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">latitude</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">longitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MT_090992</td>
<td style="text-align: left;">CAMPUS ARAUCO</td>
<td style="text-align: left;">PSJE ZARATE</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">ARAUCO</td>
<td style="text-align: left;">29 ZARATE, ARAUCO, Región del Biobío</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">ZARATE</td>
<td style="text-align: left;">Región del Biobío</td>
<td style="text-align: right;">-37.25328</td>
<td style="text-align: right;">-73.24424</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_029721</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">CASA GRANDE</td>
<td style="text-align: right;">8856</td>
<td style="text-align: left;">LO ESPEJO</td>
<td style="text-align: left;">8856 CASA GRANDE, LO ESPEJO, Región Metropolitana de Santiago</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">CASA GRANDE</td>
<td style="text-align: left;">Región Metropolitana de Santiago</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_006472</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">PSJE ARGEL</td>
<td style="text-align: right;">1625</td>
<td style="text-align: left;">CONCHALÍ</td>
<td style="text-align: left;">1625 ARGEL, CONCHALÍ, Región Metropolitana de Santiago</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">ARGEL</td>
<td style="text-align: left;">Región Metropolitana de Santiago</td>
<td style="text-align: right;">-33.37353</td>
<td style="text-align: right;">-70.67805</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_021510</td>
<td style="text-align: left;">PLAZA NORTE</td>
<td style="text-align: left;">SAN AGUSTIN ORIENTE</td>
<td style="text-align: right;">4362</td>
<td style="text-align: left;">LAMPA</td>
<td style="text-align: left;">4362 SAN AGUSTIN ORIENTE, LAMPA, Región Metropolitana de Santiago</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">SAN AGUSTIN ORIENTE</td>
<td style="text-align: left;">Región Metropolitana de Santiago</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_055164</td>
<td style="text-align: left;">ALAMEDA</td>
<td style="text-align: left;">LAS VERTIENTES VILUCO</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">BUIN</td>
<td style="text-align: left;">20 LAS VERTIENTES VILUCO, BUIN, Región Metropolitana de Santiago</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">LAS VERTIENTES VILUCO</td>
<td style="text-align: left;">Región Metropolitana de Santiago</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Resultados de etapa 2</p>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">resultados</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">codificadas</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">no_codificadas</td>
<td style="text-align: left;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p_codificadas</td>
<td style="text-align: left;">24%</td>
</tr>
<tr class="even">
<td style="text-align: left;">p_no_codificadas</td>
<td style="text-align: left;">76%</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</section>
<section id="etapa-3-distancia-jaro-winkler" class="level2 page-columns page-full" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="etapa-3-distancia-jaro-winkler"><span class="header-section-number">6.5</span> Etapa 3: Distancia Jaro-Winkler</h2>
<p>En esta etapa de transformación de las direcciones, se compara cada dirección del conjunto de datos con un maestro de calles, que contiene un listado oficial o validado de nombres de calles. El objetivo es corregir posibles errores en la escritura de las direcciones, como faltas de ortografía o variaciones en los nombres de calles, que podrían afectar la precisión del proceso de geocodificación.</p>
<p>Para realizar esta comparación y corrección, se utiliza la métrica de distancia <a href="https://en.wikipedia.org/wiki/Jaro–Winkler_distance">Jaro-Winkler</a>, un algoritmo que mide la similitud entre dos cadenas de texto. Este método asigna un valor de similitud que varía entre 0 y 1, donde 1 significa una coincidencia exacta. A diferencia de otros métodos de comparación, Jaro-Winkler favorece las coincidencias al principio de las cadenas, lo que es útil para corregir nombres de calles, ya que las primeras letras suelen ser más importantes en la coincidencia.</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="images/JW_explain.jpeg" class="img-fluid figure-img"></p>
<figcaption class="margin-caption">Explicación de Distancia Jaro Winkler</figcaption>
</figure>
</div>
<p>Mediante esta técnica, las direcciones incorrectas o mal escritas pueden ser ajustadas automáticamente para coincidir con los nombres oficiales, mejorando significativamente la precisión de la geocodificación posterior. A continuación, se mostrará el método sólo a modo ejemplo en una dirección ya queda para hacerlo más se necesita un maestro de calle a a nivel nacional.</p>
<p><strong>Ejemplo de Cálculo de Distancia de Jaro Winkler</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('stringdist')</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringdist)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>calle_base <span class="ot">&lt;-</span> <span class="st">"ALEJANDRO FLEMINS"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>calle_maestro_osm <span class="ot">&lt;-</span> <span class="st">"ALEJANDRO FLEMING"</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>distance_jw <span class="ot">&lt;-</span> <span class="fu">stringdist</span>(calle_base,calle_maestro_osm, <span class="at">method=</span><span class="st">'jw'</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>distance_jw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="images/examples_JW.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="margin-caption">Casos de aplicación Distancia Jaro Winkler</figcaption>
</figure>
</div>
<p>Referencias de algoritmos de distancias de textos (<a href="https://search.r-project.org/CRAN/refmans/stringdist/html/stringdist-metrics.html">link</a>)</p>
</section>
<section id="consolidación-y-transformación-espacial" class="level2" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="consolidación-y-transformación-espacial"><span class="header-section-number">6.6</span> Consolidación y Transformación espacial</h2>
<p>Lectura de bases de consolidadas por etapas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>resultados <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">"data/direcciones/"</span>, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">pattern =</span> <span class="st">"^geocoding"</span>, <span class="at">full.names =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(readRDS) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span><span class="fu">select</span>(., ID, SEDE, ETAPA, CONSULTA, latitude, longitude)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(longitude)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ID</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEDE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ETAPA</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CONSULTA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">latitude</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">longitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MT_069161</td>
<td style="text-align: left;">PLAZA VESPUCIO</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">5898 BOLIVAR, PEÑALOLÉN, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.48036</td>
<td style="text-align: right;">-70.57028</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_079411</td>
<td style="text-align: left;">VIÑA DEL MAR</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">1722 SANTA SARA, VILLA ALEMANA, V - VALPARAISO</td>
<td style="text-align: right;">-33.06368</td>
<td style="text-align: right;">-71.37489</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_008657</td>
<td style="text-align: left;">PUENTE ALTO</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">3507 MARCELA PAZ, LA FLORIDA, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.52744</td>
<td style="text-align: right;">-70.55770</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_072766</td>
<td style="text-align: left;">SAN BERNARDO</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">14483 VOLCAN ANTUCO, S/ BERNARDO, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.59368</td>
<td style="text-align: right;">-70.67159</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_076946</td>
<td style="text-align: left;">SAN JOAQUIN</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">10279 EMILIO TAGLE, LA FLORIDA, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.55342</td>
<td style="text-align: right;">-70.59105</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_047169</td>
<td style="text-align: left;">VALPARAISO</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">786 CALI, LA CALERA, V - VALPARAISO</td>
<td style="text-align: right;">-32.78707</td>
<td style="text-align: right;">-71.20373</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MT_020127</td>
<td style="text-align: left;">SAN CARLOS DE APOQUINDO</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">5150 IRARRAZAVAL, ÑUÑOA, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.45392</td>
<td style="text-align: right;">-70.57652</td>
</tr>
<tr class="even">
<td style="text-align: left;">DS_011645</td>
<td style="text-align: left;">SAN CARLOS DE APOQUINDO</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">5175 DIAGONAL ORIENTE, ÑUÑOA, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.44436</td>
<td style="text-align: right;">-70.59910</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DS_002632</td>
<td style="text-align: left;">MAIPU</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">5775 PASAJE NATRI, ESTACION CENTRAL, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.47642</td>
<td style="text-align: right;">-70.71298</td>
</tr>
<tr class="even">
<td style="text-align: left;">MT_024599</td>
<td style="text-align: left;">SAN JOAQUIN</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">10972 AV JOAQUIN EDWARDS BELLO, LA PINTANA, RM - METROPOLITANA</td>
<td style="text-align: right;">-33.56392</td>
<td style="text-align: right;">-70.62250</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>Transformar las corrdenadas en un objeto <code>sf</code> utilizando la función <code>st_as_sf()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>resultados_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(resultados, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">coords =</span>  <span class="fu">c</span>(<span class="st">"x"</span> <span class="ot">=</span> <span class="st">"longitude"</span>, <span class="st">"y"</span> <span class="ot">=</span> <span class="st">"latitude"</span>),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">crs =</span> <span class="fu">st_crs</span>(<span class="dv">4326</span>))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>resultados_sf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 41 features and 4 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -73.24424 ymin: -37.46137 xmax: -70.53918 ymax: -32.78707
Geodetic CRS:  WGS 84
# A tibble: 41 × 5
   ID        SEDE                    ETAPA CONSULTA                 geometry
 * &lt;chr&gt;     &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;                 &lt;POINT [°]&gt;
 1 MT_069161 PLAZA VESPUCIO              1 5898 BOLIV… (-70.57028 -33.48036)
 2 MT_079411 VIÑA DEL MAR                1 1722 SANTA… (-71.37489 -33.06368)
 3 DS_008657 PUENTE ALTO                 1 3507 MARCE…  (-70.5577 -33.52744)
 4 MT_072766 SAN BERNARDO                1 14483 VOLC… (-70.67159 -33.59368)
 5 MT_076946 SAN JOAQUIN                 1 10279 EMIL… (-70.59105 -33.55342)
 6 MT_047169 VALPARAISO                  1 786 CALI, … (-71.20373 -32.78707)
 7 MT_020127 SAN CARLOS DE APOQUINDO     1 5150 IRARR… (-70.57652 -33.45392)
 8 DS_011645 SAN CARLOS DE APOQUINDO     1 5175 DIAGO…  (-70.5991 -33.44436)
 9 DS_002632 MAIPU                       1 5775 PASAJ… (-70.71298 -33.47642)
10 MT_024599 SAN JOAQUIN                 1 10972 AV J…  (-70.6225 -33.56392)
# ℹ 31 more rows</code></pre>
</div>
</div>
<p>Visualización de los puntos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(resultados_sf, <span class="at">zcol =</span> <span class="st">"ETAPA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-21d20e108c215ab9fc2b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-21d20e108c215ab9fc2b">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[-33.4803564,-33.0636769,-33.52744315,-33.5936774,-33.5534169,-32.787073,-33.45391875,-33.4443633,-33.47641976666667,-33.5639225,-35.4305592,-33.046851,-33.3626717,-33.3795672,-37.4613694,-33.5598265,-33.45932065714285,-33.5870896,-35.9618489,-33.51637407938144,-33.453409325,-33.2285071,-33.5116367,-33.5036837,-33.5290411,-33.542815365625,-33.046185,-33.3076309,-33.0474776,-33.6203924,-33.58301427142857,-33.5296582,-33.5256385,-33.4442844,-33.53339,-37.2532813,-33.3737363,-33.1991798,-33.5573852,-33.562602525,-33.4779898],[-70.5702847,-71.37489438565163,-70.55769856666667,-70.67158569999999,-70.5910453,-71.20373119999999,-70.5765244240452,-70.59909949999999,-70.71297833333334,-70.6224994,-71.6097195,-71.6193971,-70.63145830000001,-70.6816161,-72.3502986,-70.6513209,-70.73967571428571,-70.6643322,-72.3347845,-70.75863471546391,-70.5397686,-70.80195689999999,-70.78741340000001,-70.66894000000001,-70.6999754,-70.55875356874999,-71.3929253,-71.4112341,-71.4656083,-70.6140305,-70.59022187142857,-70.76792140000001,-70.6072547,-70.5955302,-70.6405341,-73.2442423,-70.6779887,-70.679304,-70.5726566,-70.652395525,-70.5391815],6,null,"resultados_sf - ETAPA",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#4B0055","#FDE333","#FDE333","#FDE333","#FDE333","#FDE333","#FDE333"],"fillOpacity":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_069161&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PLAZA VESPUCIO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>5898 BOLIVAR, PEÑALOLÉN, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_079411&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>VIÑA DEL MAR&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>1722 SANTA SARA, VILLA ALEMANA, V - VALPARAISO&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>DS_008657&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PUENTE ALTO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>3507 MARCELA PAZ, LA FLORIDA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_072766&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN BERNARDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>14483 VOLCAN ANTUCO, S/ BERNARDO, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_076946&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN JOAQUIN&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>10279 EMILIO TAGLE, LA FLORIDA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_047169&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>VALPARAISO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>786 CALI, LA CALERA, V - VALPARAISO&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_020127&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN CARLOS DE APOQUINDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>5150 IRARRAZAVAL, ÑUÑOA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>DS_011645&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN CARLOS DE APOQUINDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>5175 DIAGONAL ORIENTE, ÑUÑOA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>DS_002632&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>MAIPU&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>5775 PASAJE NATRI, ESTACION CENTRAL, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>10&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_024599&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN JOAQUIN&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>10972 AV JOAQUIN EDWARDS BELLO, LA PINTANA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>11&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_026436&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>VIÑA DEL MAR&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>1550 41 ORIENTE, TALCA, VII - MAULE&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>12&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_097014&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>VALPARAISO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>2792 INDEPENDENCIA, VALPARAÍSO, V - VALPARAISO&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>13&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_016572&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>ALAMEDA&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>902 LOS GOMEROS, HUECHURABA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>14&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_052161&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>MAIPU&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>5477 TRES ORIENTE, CONCHALÍ, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>15&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_074754&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>CONCEPCION&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>340 LINCOYAN, LOS ÁNGELES, VIII - BIO-BIO&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>16&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>SP_006374&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PUENTE ALTO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>10878 PASAJE GALA, LA PINTANA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>17&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_035927&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>MAIPU&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>505 LAS TAGUAS, PUDAHUEL, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>18&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_028295&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN BERNARDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>1993 MARMOLEJO 1929, SAN BERNARDO, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>19&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_052669&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>CONCEPCION&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>587 PASAJE 19 POBLACION CAUQUENES 0587, CAUQUENES, VII - MAULE&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>20&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>DS_004226&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>MAIPU&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>97 AVENIDA PORTALES, MAIPÚ, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>21&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_016913&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PADRE ALONSO DE OVALLE&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>180 CHONCHI, LA REINA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>22&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_068359&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PLAZA NORTE&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>770 PASAJE HONDURAS, LAMPA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>23&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>SP_007997&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>ANTONIO VARAS&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>2191 PASAJE LLEU LLEU, MAIPU, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>24&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_023429&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>ALAMEDA&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>2573 CARELMAPU DAVILA, PEDRO AGUIRRE CERDA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>25&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_045290&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>ANTONIO VARAS&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>9119 FRANCISCO ENCINA, LO ESPEJO, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>26&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_077972&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PUENTE ALTO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>9619 ALCAPARRA, LA FLORIDA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>27&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_059108&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>VALPARAISO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>1444 ALCALDE ALEJANDRO PERALTA 1444, VILLA ALEMANA, V - VALPARAISO&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>28&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>DS_015140&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>VIÑA DEL MAR&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>482 DR VILDOSOLA, CASABLANCA, V - VALPARAISO&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>29&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>DS_014470&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>VALPARAISO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>818 ORTIZ VEGA, QUILPUÉ, V - VALPARAISO&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>30&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_010553&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PUENTE ALTO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>3280 ESTACION PURRANQUE, PUENTE ALTO, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>31&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_013788&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PLAZA VESPUCIO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>825 LOS SONETOS, PUENTE ALTO, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>32&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_059840&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PLAZA OESTE&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>500 LUIS HERNANDEZ PARKER, MAIPÚ, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>33&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_009729&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PLAZA VESPUCIO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>7627 FRESIA, LA FLORIDA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>34&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_088442&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN CARLOS DE APOQUINDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>409 DOCTOR PEDRO LAUTARO, PROVIDENCIA, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>35&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_024813&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN BERNARDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>8128 LOS CRISANTEMOS, SAN RAMON, RM - METROPOLITANA&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>36&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_090992&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>CAMPUS ARAUCO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>24 ZARATE, ARAUCO, Región del Biobío&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>37&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>DS_006472&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PLAZA NORTE&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>1620 ARGEL, CONCHALÍ, Región Metropolitana de Santiago&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>38&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_094193&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>PLAZA NORTE&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>801 BOLDO, COLINA, Región Metropolitana de Santiago&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>39&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>SP_003371&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN CARLOS DE APOQUINDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>1060 EL YESO, LA FLORIDA, Región Metropolitana de Santiago&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>40&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_062311&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>SAN CARLOS DE APOQUINDO&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>1555 LOS GORRIONES, LA PINTANA, Región Metropolitana de Santiago&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>41&emsp;<\/td><\/tr><tr><td>1<\/td><th>ID&emsp;<\/th><td>MT_009099&emsp;<\/td><\/tr><tr><td>2<\/td><th>SEDE&emsp;<\/th><td>ANTONIO VARAS&emsp;<\/td><\/tr><tr><td>3<\/td><th>ETAPA&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>4<\/td><th>CONSULTA&emsp;<\/th><td>8931 QUELHUE, PEÑALOLEN, Región Metropolitana de Santiago&emsp;<\/td><\/tr><tr><td>5<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","2","2","2","2","2"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-73.2442423,-37.4613694,-70.5391815,-32.787073,true,"resultados_sf - ETAPA","Zoom to resultados_sf - ETAPA","<strong> resultados_sf - ETAPA <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"resultados_sf - ETAPA",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#4B0055 , #4B0055 0%, #723357 20%, #965D56 40%, #B98852 60%, #DBB548 80%, #FDE333 100%, #FDE333 "],"labels":["1.0","1.2","1.4","1.6","1.8","2.0"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"numeric","title":"resultados_sf - ETAPA","extra":{"p_1":0,"p_n":1},"layerId":null,"className":"info legend","group":"resultados_sf - ETAPA"}]}],"limits":{"lat":[-37.4613694,-32.787073],"lng":[-73.2442423,-70.5391815]},"fitBounds":[-37.4613694,-73.2442423,-32.787073,-70.5391815,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
</section>
<section id="conclusión" class="level2" data-number="6.7">
<h2 data-number="6.7" class="anchored" data-anchor-id="conclusión"><span class="header-section-number">6.7</span> Conclusión</h2>
<p>En esta sección, hemos cubierto el proceso de geocodificación de direcciones, proceso escencial para cualquier análisis espacial que involucre ubicaciones basadas en texto. El proceso de geocodificación es, en gran medida, artesanal, ya que las etapas a seguir dependen de la naturaleza de las direcciones y los errores que puedan contener. La selección y diseño de estas etapas es una decisión del analista o desarrollador, quien debe adaptar el flujo de trabajo según las características y necesidades de los datos. Con estas herramientas, puedes aplicar la geocodificación a tus propios conjuntos de datos y generar análisis espaciales significativos.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./r_project.html" class="pagination-link" aria-label="R Project">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">R Project</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link" aria-label="References">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Denis Berroeta</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>